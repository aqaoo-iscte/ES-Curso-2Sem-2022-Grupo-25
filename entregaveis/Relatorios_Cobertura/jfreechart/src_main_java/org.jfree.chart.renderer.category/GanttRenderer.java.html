<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../jacoco-resources/report.gif" type="image/gif"/><title>GanttRenderer.java</title><link rel="stylesheet" href="../../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">java (25 Mar 2022 23:00:41)</a> &gt; <a href="../../index.html" class="el_group">jfreechart</a> &gt; <a href="../index.html" class="el_bundle">src/main/java</a> &gt; <a href="index.source.html" class="el_package">org.jfree.chart.renderer.category</a> &gt; <span class="el_source">GanttRenderer.java</span></div><h1>GanttRenderer.java</h1><pre class="source lang-java linenums">/* ===========================================================
 * JFreeChart : a free chart library for the Java(tm) platform
 * ===========================================================
 *
 * (C) Copyright 2000-2022, by David Gilbert and Contributors.
 *
 * Project Info:  http://www.jfree.org/jfreechart/index.html
 *
 * This library is free software; you can redistribute it and/or modify it
 * under the terms of the GNU Lesser General Public License as published by
 * the Free Software Foundation; either version 2.1 of the License, or
 * (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 * or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public
 * License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301,
 * USA.
 *
 * [Oracle and Java are registered trademarks of Oracle and/or its affiliates. 
 * Other names may be trademarks of their respective owners.]
 *
 * ------------------
 * GanttRenderer.java
 * ------------------
 * (C) Copyright 2003-2022, by David Gilbert.
 *
 * Original Author:  David Gilbert;
 * Contributor(s):   -;
 * 
 */

package org.jfree.chart.renderer.category;

import java.awt.Color;
import java.awt.Graphics2D;
import java.awt.Paint;
import java.awt.Stroke;
import java.awt.geom.Rectangle2D;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.Serializable;

import org.jfree.chart.axis.CategoryAxis;
import org.jfree.chart.axis.ValueAxis;
import org.jfree.chart.entity.EntityCollection;
import org.jfree.chart.event.RendererChangeEvent;
import org.jfree.chart.labels.CategoryItemLabelGenerator;
import org.jfree.chart.plot.CategoryPlot;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.api.RectangleEdge;
import org.jfree.chart.internal.PaintUtils;
import org.jfree.chart.internal.Args;
import org.jfree.chart.internal.SerialUtils;
import org.jfree.data.category.CategoryDataset;
import org.jfree.data.gantt.GanttCategoryDataset;

/**
 * A renderer for simple Gantt charts.  The example shown
 * here is generated by the {@code GanttDemo1.java} program
 * included in the JFreeChart Demo Collection:
 * &lt;br&gt;&lt;br&gt;
 * &lt;img src=&quot;doc-files/GanttRendererSample.png&quot; alt=&quot;GanttRendererSample.png&quot;&gt;
 */
public class GanttRenderer extends IntervalBarRenderer implements Serializable {

    /** For serialization. */
    private static final long serialVersionUID = -4010349116350119512L;

    /** The paint for displaying the percentage complete. */
    private transient Paint completePaint;

    /** The paint for displaying the incomplete part of a task. */
    private transient Paint incompletePaint;

    /**
     * Controls the starting edge of the progress indicator (expressed as a
     * percentage of the overall bar width).
     */
    private double startPercent;

    /**
     * Controls the ending edge of the progress indicator (expressed as a
     * percentage of the overall bar width).
     */
    private double endPercent;

    /**
     * Creates a new renderer.
     */
    public GanttRenderer() {
<span class="fc" id="L97">        super();</span>
<span class="fc" id="L98">        setIncludeBaseInRange(false);</span>
<span class="fc" id="L99">        this.completePaint = Color.GREEN;</span>
<span class="fc" id="L100">        this.incompletePaint = Color.RED;</span>
<span class="fc" id="L101">        this.startPercent = 0.35;</span>
<span class="fc" id="L102">        this.endPercent = 0.65;</span>
<span class="fc" id="L103">    }</span>

    /**
     * Returns the paint used to show the percentage complete.
     *
     * @return The paint (never {@code null}).
     *
     * @see #setCompletePaint(Paint)
     */
    public Paint getCompletePaint() {
<span class="nc" id="L113">        return this.completePaint;</span>
    }

    /**
     * Sets the paint used to show the percentage complete and sends a
     * {@link RendererChangeEvent} to all registered listeners.
     *
     * @param paint  the paint ({@code null} not permitted).
     *
     * @see #getCompletePaint()
     */
    public void setCompletePaint(Paint paint) {
<span class="nc" id="L125">        Args.nullNotPermitted(paint, &quot;paint&quot;);</span>
<span class="nc" id="L126">        this.completePaint = paint;</span>
<span class="nc" id="L127">        fireChangeEvent();</span>
<span class="nc" id="L128">    }</span>

    /**
     * Returns the paint used to show the percentage incomplete.
     *
     * @return The paint (never {@code null}).
     *
     * @see #setCompletePaint(Paint)
     */
    public Paint getIncompletePaint() {
<span class="nc" id="L138">        return this.incompletePaint;</span>
    }

    /**
     * Sets the paint used to show the percentage incomplete and sends a
     * {@link RendererChangeEvent} to all registered listeners.
     *
     * @param paint  the paint ({@code null} not permitted).
     *
     * @see #getIncompletePaint()
     */
    public void setIncompletePaint(Paint paint) {
<span class="nc" id="L150">        Args.nullNotPermitted(paint, &quot;paint&quot;);</span>
<span class="nc" id="L151">        this.incompletePaint = paint;</span>
<span class="nc" id="L152">        fireChangeEvent();</span>
<span class="nc" id="L153">    }</span>

    /**
     * Returns the position of the start of the progress indicator, as a
     * percentage of the bar width.
     *
     * @return The start percent.
     *
     * @see #setStartPercent(double)
     */
    public double getStartPercent() {
<span class="fc" id="L164">        return this.startPercent;</span>
    }

    /**
     * Sets the position of the start of the progress indicator, as a
     * percentage of the bar width, and sends a {@link RendererChangeEvent} to
     * all registered listeners.
     *
     * @param percent  the percent.
     *
     * @see #getStartPercent()
     */
    public void setStartPercent(double percent) {
<span class="nc" id="L177">        this.startPercent = percent;</span>
<span class="nc" id="L178">        fireChangeEvent();</span>
<span class="nc" id="L179">    }</span>

    /**
     * Returns the position of the end of the progress indicator, as a
     * percentage of the bar width.
     *
     * @return The end percent.
     *
     * @see #setEndPercent(double)
     */
    public double getEndPercent() {
<span class="fc" id="L190">        return this.endPercent;</span>
    }

    /**
     * Sets the position of the end of the progress indicator, as a percentage
     * of the bar width, and sends a {@link RendererChangeEvent} to all
     * registered listeners.
     *
     * @param percent  the percent.
     *
     * @see #getEndPercent()
     */
    public void setEndPercent(double percent) {
<span class="nc" id="L203">        this.endPercent = percent;</span>
<span class="nc" id="L204">        fireChangeEvent();</span>
<span class="nc" id="L205">    }</span>

    /**
     * Draws the bar for a single (series, category) data item.
     *
     * @param g2  the graphics device.
     * @param state  the renderer state.
     * @param dataArea  the data area.
     * @param plot  the plot.
     * @param domainAxis  the domain axis.
     * @param rangeAxis  the range axis.
     * @param dataset  the dataset.
     * @param row  the row index (zero-based).
     * @param column  the column index (zero-based).
     * @param pass  the pass index.
     */
    @Override
    public void drawItem(Graphics2D g2, CategoryItemRendererState state,
            Rectangle2D dataArea, CategoryPlot plot, CategoryAxis domainAxis,
            ValueAxis rangeAxis, CategoryDataset dataset, int row,
            int column, int pass) {

<span class="pc bpc" id="L227" title="1 of 2 branches missed.">         if (dataset instanceof GanttCategoryDataset) {</span>
<span class="fc" id="L228">             GanttCategoryDataset gcd = (GanttCategoryDataset) dataset;</span>
<span class="fc" id="L229">             drawTasks(g2, state, dataArea, plot, domainAxis, rangeAxis, gcd,</span>
<span class="fc" id="L230">                     row, column);</span>
<span class="fc" id="L231">         }</span>
         else {  // let the superclass handle it...
<span class="nc" id="L233">             super.drawItem(g2, state, dataArea, plot, domainAxis, rangeAxis,</span>
<span class="nc" id="L234">                     dataset, row, column, pass);</span>
         }

<span class="fc" id="L237">     }</span>

    /**
     * Draws the tasks/subtasks for one item.
     *
     * @param g2  the graphics device.
     * @param state  the renderer state.
     * @param dataArea  the data plot area.
     * @param plot  the plot.
     * @param domainAxis  the domain axis.
     * @param rangeAxis  the range axis.
     * @param dataset  the data.
     * @param row  the row index (zero-based).
     * @param column  the column index (zero-based).
     */
    protected void drawTasks(Graphics2D g2,
                             CategoryItemRendererState state,
                             Rectangle2D dataArea,
                             CategoryPlot plot,
                             CategoryAxis domainAxis,
                             ValueAxis rangeAxis,
                             GanttCategoryDataset dataset,
                             int row,
                             int column) {

<span class="fc" id="L262">        int count = dataset.getSubIntervalCount(row, column);</span>
<span class="pc bpc" id="L263" title="1 of 2 branches missed.">        if (count == 0) {</span>
<span class="fc" id="L264">            drawTask(g2, state, dataArea, plot, domainAxis, rangeAxis,</span>
<span class="fc" id="L265">                    dataset, row, column);</span>
        }

<span class="fc" id="L268">        PlotOrientation orientation = plot.getOrientation();</span>
<span class="pc bpc" id="L269" title="1 of 2 branches missed.">        for (int subinterval = 0; subinterval &lt; count; subinterval++) {</span>

<span class="nc" id="L271">            RectangleEdge rangeAxisLocation = plot.getRangeAxisEdge();</span>

            // value 0
<span class="nc" id="L274">            Number value0 = dataset.getStartValue(row, column, subinterval);</span>
<span class="nc bnc" id="L275" title="All 2 branches missed.">            if (value0 == null) {</span>
<span class="nc" id="L276">                return;</span>
            }
<span class="nc" id="L278">            double translatedValue0 = rangeAxis.valueToJava2D(</span>
<span class="nc" id="L279">                    value0.doubleValue(), dataArea, rangeAxisLocation);</span>

            // value 1
<span class="nc" id="L282">            Number value1 = dataset.getEndValue(row, column, subinterval);</span>
<span class="nc bnc" id="L283" title="All 2 branches missed.">            if (value1 == null) {</span>
<span class="nc" id="L284">                return;</span>
            }
<span class="nc" id="L286">            double translatedValue1 = rangeAxis.valueToJava2D(</span>
<span class="nc" id="L287">                    value1.doubleValue(), dataArea, rangeAxisLocation);</span>

<span class="nc bnc" id="L289" title="All 2 branches missed.">            if (translatedValue1 &lt; translatedValue0) {</span>
<span class="nc" id="L290">                double temp = translatedValue1;</span>
<span class="nc" id="L291">                translatedValue1 = translatedValue0;</span>
<span class="nc" id="L292">                translatedValue0 = temp;</span>
            }

<span class="nc" id="L295">            double rectStart = calculateBarW0(plot, plot.getOrientation(),</span>
<span class="nc" id="L296">                    dataArea, domainAxis, state, row, column);</span>
<span class="nc" id="L297">            double rectLength = Math.abs(translatedValue1 - translatedValue0);</span>
<span class="nc" id="L298">            double rectBreadth = state.getBarWidth();</span>

            // DRAW THE BARS...
<span class="nc" id="L301">            Rectangle2D bar = null;</span>
<span class="nc" id="L302">            RectangleEdge barBase = null;</span>
<span class="nc bnc" id="L303" title="All 2 branches missed.">            if (plot.getOrientation() == PlotOrientation.HORIZONTAL) {</span>
<span class="nc" id="L304">                bar = new Rectangle2D.Double(translatedValue0, rectStart,</span>
<span class="nc" id="L305">                        rectLength, rectBreadth);</span>
<span class="nc" id="L306">                barBase = RectangleEdge.LEFT;</span>
<span class="nc" id="L307">            }</span>
<span class="nc bnc" id="L308" title="All 2 branches missed.">            else if (plot.getOrientation() == PlotOrientation.VERTICAL) {</span>
<span class="nc" id="L309">                bar = new Rectangle2D.Double(rectStart, translatedValue0,</span>
<span class="nc" id="L310">                        rectBreadth, rectLength);</span>
<span class="nc" id="L311">                barBase = RectangleEdge.BOTTOM;</span>
            }

<span class="nc" id="L314">            Rectangle2D completeBar = null;</span>
<span class="nc" id="L315">            Rectangle2D incompleteBar = null;</span>
<span class="nc" id="L316">            Number percent = dataset.getPercentComplete(row, column,</span>
<span class="nc" id="L317">                    subinterval);</span>
<span class="nc" id="L318">            double start = getStartPercent();</span>
<span class="nc" id="L319">            double end = getEndPercent();</span>
<span class="nc bnc" id="L320" title="All 2 branches missed.">            if (percent != null) {</span>
<span class="nc" id="L321">                double p = percent.doubleValue();</span>
<span class="nc bnc" id="L322" title="All 2 branches missed.">                if (orientation == PlotOrientation.HORIZONTAL) {</span>
<span class="nc" id="L323">                    completeBar = new Rectangle2D.Double(translatedValue0,</span>
<span class="nc" id="L324">                            rectStart + start * rectBreadth, rectLength * p,</span>
<span class="nc" id="L325">                            rectBreadth * (end - start));</span>
<span class="nc" id="L326">                    incompleteBar = new Rectangle2D.Double(translatedValue0</span>
<span class="nc" id="L327">                            + rectLength * p, rectStart + start * rectBreadth,</span>
<span class="nc" id="L328">                            rectLength * (1 - p), rectBreadth * (end - start));</span>
<span class="nc" id="L329">                }</span>
<span class="nc bnc" id="L330" title="All 2 branches missed.">                else if (orientation == PlotOrientation.VERTICAL) {</span>
<span class="nc" id="L331">                    completeBar = new Rectangle2D.Double(rectStart + start</span>
<span class="nc" id="L332">                            * rectBreadth, translatedValue0 + rectLength</span>
<span class="nc" id="L333">                            * (1 - p), rectBreadth * (end - start),</span>
<span class="nc" id="L334">                            rectLength * p);</span>
<span class="nc" id="L335">                    incompleteBar = new Rectangle2D.Double(rectStart + start</span>
<span class="nc" id="L336">                            * rectBreadth, translatedValue0, rectBreadth</span>
<span class="nc" id="L337">                            * (end - start), rectLength * (1 - p));</span>
                }

            }

<span class="nc bnc" id="L342" title="All 2 branches missed.">            if (getShadowsVisible()) {</span>
<span class="nc" id="L343">                getBarPainter().paintBarShadow(g2, this, row, column, bar,</span>
<span class="nc" id="L344">                        barBase, true);</span>
            }
<span class="nc" id="L346">            getBarPainter().paintBar(g2, this, row, column, bar, barBase);</span>

<span class="nc bnc" id="L348" title="All 2 branches missed.">            if (completeBar != null) {</span>
<span class="nc" id="L349">                g2.setPaint(getCompletePaint());</span>
<span class="nc" id="L350">                g2.fill(completeBar);</span>
            }
<span class="nc bnc" id="L352" title="All 2 branches missed.">            if (incompleteBar != null) {</span>
<span class="nc" id="L353">                g2.setPaint(getIncompletePaint());</span>
<span class="nc" id="L354">                g2.fill(incompleteBar);</span>
            }
<span class="nc bnc" id="L356" title="All 2 branches missed.">            if (isDrawBarOutline()</span>
<span class="nc bnc" id="L357" title="All 2 branches missed.">                    &amp;&amp; state.getBarWidth() &gt; BAR_OUTLINE_WIDTH_THRESHOLD) {</span>
<span class="nc" id="L358">                g2.setStroke(getItemStroke(row, column));</span>
<span class="nc" id="L359">                g2.setPaint(getItemOutlinePaint(row, column));</span>
<span class="nc" id="L360">                g2.draw(bar);</span>
            }

<span class="nc bnc" id="L363" title="All 2 branches missed.">            if (subinterval == count - 1) {</span>
                // submit the current data point as a crosshair candidate
<span class="nc" id="L365">                int datasetIndex = plot.indexOf(dataset);</span>
<span class="nc" id="L366">                Comparable columnKey = dataset.getColumnKey(column);</span>
<span class="nc" id="L367">                Comparable rowKey = dataset.getRowKey(row);</span>
<span class="nc" id="L368">                double xx = domainAxis.getCategorySeriesMiddle(columnKey,</span>
<span class="nc" id="L369">                        rowKey, dataset, getItemMargin(), dataArea,</span>
<span class="nc" id="L370">                        plot.getDomainAxisEdge());</span>
<span class="nc" id="L371">                updateCrosshairValues(state.getCrosshairState(),</span>
<span class="nc" id="L372">                        dataset.getRowKey(row), dataset.getColumnKey(column),</span>
<span class="nc" id="L373">                        value1.doubleValue(), datasetIndex, xx,</span>
<span class="nc" id="L374">                        translatedValue1, orientation);</span>

            }
            // collect entity and tool tip information...
<span class="nc bnc" id="L378" title="All 2 branches missed.">            if (state.getInfo() != null) {</span>
<span class="nc" id="L379">                EntityCollection entities = state.getEntityCollection();</span>
<span class="nc bnc" id="L380" title="All 2 branches missed.">                if (entities != null) {</span>
<span class="nc" id="L381">                    addItemEntity(entities, dataset, row, column, bar);</span>
                }
            }
        }
<span class="fc" id="L385">    }</span>

    /**
     * Draws a single task.
     *
     * @param g2  the graphics device.
     * @param state  the renderer state.
     * @param dataArea  the data plot area.
     * @param plot  the plot.
     * @param domainAxis  the domain axis.
     * @param rangeAxis  the range axis.
     * @param dataset  the data.
     * @param row  the row index (zero-based).
     * @param column  the column index (zero-based).
     */
    protected void drawTask(Graphics2D g2,
                            CategoryItemRendererState state,
                            Rectangle2D dataArea,
                            CategoryPlot plot,
                            CategoryAxis domainAxis,
                            ValueAxis rangeAxis,
                            GanttCategoryDataset dataset,
                            int row,
                            int column) {

<span class="fc" id="L410">        PlotOrientation orientation = plot.getOrientation();</span>
<span class="fc" id="L411">        RectangleEdge rangeAxisLocation = plot.getRangeAxisEdge();</span>

        // Y0
<span class="fc" id="L414">        Number value0 = dataset.getEndValue(row, column);</span>
<span class="pc bpc" id="L415" title="1 of 2 branches missed.">        if (value0 == null) {</span>
<span class="nc" id="L416">            return;</span>
        }
<span class="fc" id="L418">        double java2dValue0 = rangeAxis.valueToJava2D(value0.doubleValue(),</span>
<span class="fc" id="L419">                dataArea, rangeAxisLocation);</span>

        // Y1
<span class="fc" id="L422">        Number value1 = dataset.getStartValue(row, column);</span>
<span class="pc bpc" id="L423" title="1 of 2 branches missed.">        if (value1 == null) {</span>
<span class="nc" id="L424">            return;</span>
        }
<span class="fc" id="L426">        double java2dValue1 = rangeAxis.valueToJava2D(value1.doubleValue(),</span>
<span class="fc" id="L427">                dataArea, rangeAxisLocation);</span>

<span class="fc bfc" id="L429" title="All 2 branches covered.">        if (java2dValue1 &lt; java2dValue0) {</span>
<span class="fc" id="L430">            double temp = java2dValue1;</span>
<span class="fc" id="L431">            java2dValue1 = java2dValue0;</span>
<span class="fc" id="L432">            java2dValue0 = temp;</span>
<span class="fc" id="L433">            value1 = value0;</span>
        }

<span class="fc" id="L436">        double rectStart = calculateBarW0(plot, orientation, dataArea,</span>
<span class="fc" id="L437">                domainAxis, state, row, column);</span>
<span class="fc" id="L438">        double rectBreadth = state.getBarWidth();</span>
<span class="fc" id="L439">        double rectLength = Math.abs(java2dValue1 - java2dValue0);</span>

<span class="fc" id="L441">        Rectangle2D bar = null;</span>
<span class="fc" id="L442">        RectangleEdge barBase = null;</span>
<span class="pc bpc" id="L443" title="1 of 2 branches missed.">        if (orientation == PlotOrientation.HORIZONTAL) {</span>
<span class="fc" id="L444">            bar = new Rectangle2D.Double(java2dValue0, rectStart, rectLength,</span>
<span class="fc" id="L445">                    rectBreadth);</span>
<span class="fc" id="L446">            barBase = RectangleEdge.LEFT;</span>
<span class="fc" id="L447">        }</span>
<span class="nc bnc" id="L448" title="All 2 branches missed.">        else if (orientation == PlotOrientation.VERTICAL) {</span>
<span class="nc" id="L449">            bar = new Rectangle2D.Double(rectStart, java2dValue1, rectBreadth,</span>
<span class="nc" id="L450">                    rectLength);</span>
<span class="nc" id="L451">            barBase = RectangleEdge.BOTTOM;</span>
        }

<span class="fc" id="L454">        Rectangle2D completeBar = null;</span>
<span class="fc" id="L455">        Rectangle2D incompleteBar = null;</span>
<span class="fc" id="L456">        Number percent = dataset.getPercentComplete(row, column);</span>
<span class="fc" id="L457">        double start = getStartPercent();</span>
<span class="fc" id="L458">        double end = getEndPercent();</span>
<span class="pc bpc" id="L459" title="1 of 2 branches missed.">        if (percent != null) {</span>
<span class="nc" id="L460">            double p = percent.doubleValue();</span>
<span class="nc bnc" id="L461" title="All 2 branches missed.">            if (plot.getOrientation() == PlotOrientation.HORIZONTAL) {</span>
<span class="nc" id="L462">                completeBar = new Rectangle2D.Double(java2dValue0,</span>
<span class="nc" id="L463">                        rectStart + start * rectBreadth, rectLength * p,</span>
<span class="nc" id="L464">                        rectBreadth * (end - start));</span>
<span class="nc" id="L465">                incompleteBar = new Rectangle2D.Double(java2dValue0</span>
<span class="nc" id="L466">                        + rectLength * p, rectStart + start * rectBreadth,</span>
<span class="nc" id="L467">                        rectLength * (1 - p), rectBreadth * (end - start));</span>
<span class="nc" id="L468">            }</span>
<span class="nc bnc" id="L469" title="All 2 branches missed.">            else if (plot.getOrientation() == PlotOrientation.VERTICAL) {</span>
<span class="nc" id="L470">                completeBar = new Rectangle2D.Double(rectStart + start</span>
<span class="nc" id="L471">                        * rectBreadth, java2dValue1 + rectLength * (1 - p),</span>
<span class="nc" id="L472">                        rectBreadth * (end - start), rectLength * p);</span>
<span class="nc" id="L473">                incompleteBar = new Rectangle2D.Double(rectStart + start</span>
<span class="nc" id="L474">                        * rectBreadth, java2dValue1, rectBreadth * (end</span>
<span class="nc" id="L475">                        - start), rectLength * (1 - p));</span>
            }

        }

<span class="pc bpc" id="L480" title="1 of 2 branches missed.">        if (getShadowsVisible()) {</span>
<span class="nc" id="L481">            getBarPainter().paintBarShadow(g2, this, row, column, bar,</span>
<span class="nc" id="L482">                    barBase, true);</span>
        }
<span class="fc" id="L484">        getBarPainter().paintBar(g2, this, row, column, bar, barBase);</span>

<span class="pc bpc" id="L486" title="1 of 2 branches missed.">        if (completeBar != null) {</span>
<span class="nc" id="L487">            g2.setPaint(getCompletePaint());</span>
<span class="nc" id="L488">            g2.fill(completeBar);</span>
        }
<span class="pc bpc" id="L490" title="1 of 2 branches missed.">        if (incompleteBar != null) {</span>
<span class="nc" id="L491">            g2.setPaint(getIncompletePaint());</span>
<span class="nc" id="L492">            g2.fill(incompleteBar);</span>
        }

        // draw the outline...
<span class="pc bpc" id="L496" title="1 of 2 branches missed.">        if (isDrawBarOutline()</span>
<span class="nc bnc" id="L497" title="All 2 branches missed.">                &amp;&amp; state.getBarWidth() &gt; BAR_OUTLINE_WIDTH_THRESHOLD) {</span>
<span class="nc" id="L498">            Stroke stroke = getItemOutlineStroke(row, column);</span>
<span class="nc" id="L499">            Paint paint = getItemOutlinePaint(row, column);</span>
<span class="nc bnc" id="L500" title="All 4 branches missed.">            if (stroke != null &amp;&amp; paint != null) {</span>
<span class="nc" id="L501">                g2.setStroke(stroke);</span>
<span class="nc" id="L502">                g2.setPaint(paint);</span>
<span class="nc" id="L503">                g2.draw(bar);</span>
            }
        }

<span class="fc" id="L507">        CategoryItemLabelGenerator generator = getItemLabelGenerator(row,</span>
<span class="fc" id="L508">                column);</span>
<span class="pc bpc" id="L509" title="3 of 4 branches missed.">        if (generator != null &amp;&amp; isItemLabelVisible(row, column)) {</span>
<span class="nc" id="L510">            drawItemLabel(g2, dataset, row, column, plot, generator, bar,</span>
<span class="nc" id="L511">                    false);</span>
        }

        // submit the current data point as a crosshair candidate
<span class="fc" id="L515">        int datasetIndex = plot.indexOf(dataset);</span>
<span class="fc" id="L516">        Comparable columnKey = dataset.getColumnKey(column);</span>
<span class="fc" id="L517">        Comparable rowKey = dataset.getRowKey(row);</span>
<span class="fc" id="L518">        double xx = domainAxis.getCategorySeriesMiddle(columnKey, rowKey,</span>
<span class="fc" id="L519">                dataset, getItemMargin(), dataArea, plot.getDomainAxisEdge());</span>
<span class="fc" id="L520">        updateCrosshairValues(state.getCrosshairState(),</span>
<span class="fc" id="L521">                dataset.getRowKey(row), dataset.getColumnKey(column),</span>
<span class="fc" id="L522">                value1.doubleValue(), datasetIndex, xx, java2dValue1,</span>
<span class="fc" id="L523">                orientation);</span>

        // collect entity and tool tip information...
<span class="fc" id="L526">        EntityCollection entities = state.getEntityCollection();</span>
<span class="pc bpc" id="L527" title="1 of 2 branches missed.">        if (entities != null) {</span>
<span class="nc" id="L528">            addItemEntity(entities, dataset, row, column, bar);</span>
        }
<span class="fc" id="L530">    }</span>

    /**
     * Returns the Java2D coordinate for the middle of the specified data item.
     *
     * @param rowKey  the row key.
     * @param columnKey  the column key.
     * @param dataset  the dataset.
     * @param axis  the axis.
     * @param area  the drawing area.
     * @param edge  the edge along which the axis lies.
     *
     * @return The Java2D coordinate.
     */
    @Override
    public double getItemMiddle(Comparable&lt;?&gt; rowKey, Comparable&lt;?&gt; columnKey,
                                CategoryDataset&lt;?, ?&gt; dataset, CategoryAxis axis, Rectangle2D area,
                                RectangleEdge edge) {
<span class="nc" id="L548">        return axis.getCategorySeriesMiddle(columnKey, rowKey, dataset,</span>
<span class="nc" id="L549">                getItemMargin(), area, edge);</span>
    }

    /**
     * Tests this renderer for equality with an arbitrary object.
     *
     * @param obj  the object ({@code null} permitted).
     *
     * @return A boolean.
     */
    @Override
    public boolean equals(Object obj) {
<span class="nc bnc" id="L561" title="All 2 branches missed.">        if (obj == this) {</span>
<span class="nc" id="L562">            return true;</span>
        }
<span class="nc bnc" id="L564" title="All 2 branches missed.">        if (!(obj instanceof GanttRenderer)) {</span>
<span class="nc" id="L565">            return false;</span>
        }
<span class="nc" id="L567">        GanttRenderer that = (GanttRenderer) obj;</span>
<span class="nc bnc" id="L568" title="All 2 branches missed.">        if (!PaintUtils.equal(this.completePaint, that.completePaint)) {</span>
<span class="nc" id="L569">            return false;</span>
        }
<span class="nc bnc" id="L571" title="All 2 branches missed.">        if (!PaintUtils.equal(this.incompletePaint, that.incompletePaint)) {</span>
<span class="nc" id="L572">            return false;</span>
        }
<span class="nc bnc" id="L574" title="All 2 branches missed.">        if (this.startPercent != that.startPercent) {</span>
<span class="nc" id="L575">            return false;</span>
        }
<span class="nc bnc" id="L577" title="All 2 branches missed.">        if (this.endPercent != that.endPercent) {</span>
<span class="nc" id="L578">            return false;</span>
        }
<span class="nc" id="L580">        return super.equals(obj);</span>
    }

    /**
     * Provides serialization support.
     *
     * @param stream  the output stream.
     *
     * @throws IOException  if there is an I/O error.
     */
    private void writeObject(ObjectOutputStream stream) throws IOException {
<span class="nc" id="L591">        stream.defaultWriteObject();</span>
<span class="nc" id="L592">        SerialUtils.writePaint(this.completePaint, stream);</span>
<span class="nc" id="L593">        SerialUtils.writePaint(this.incompletePaint, stream);</span>
<span class="nc" id="L594">    }</span>

    /**
     * Provides serialization support.
     *
     * @param stream  the input stream.
     *
     * @throws IOException  if there is an I/O error.
     * @throws ClassNotFoundException  if there is a classpath problem.
     */
    private void readObject(ObjectInputStream stream)
        throws IOException, ClassNotFoundException {
<span class="nc" id="L606">        stream.defaultReadObject();</span>
<span class="nc" id="L607">        this.completePaint = SerialUtils.readPaint(stream);</span>
<span class="nc" id="L608">        this.incompletePaint = SerialUtils.readPaint(stream);</span>
<span class="nc" id="L609">    }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span>java (25 Mar 2022 23:00:41)</div></body></html>